<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Game Sang Juara</title>
    <!-- Memuat Tailwind CSS untuk styling modern -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Memuat Font Awesome untuk ikon donasi -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Memuat Tone.js untuk efek suara interaktif (hanya untuk umpan balik non-vokal) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <style>
        /* Menambahkan font yang ramah anak dan gaya tambahan */
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Noto+Sans+Arabic:wght@400;700&display=swap');
        body {
            font-family: 'Fredoka One', cursive;
            -webkit-user-select: none; /* Safari */
            -ms-user-select: none; /* IE 10 and IE 11 */
            user-select: none; /* Standard syntax */
            overflow-x: hidden;
            touch-action: pan-y; /* Izinkan scroll vertikal, cegah interaksi lain */
        }
        /* Font khusus untuk huruf Hijaiyah */
        .font-hijaiyah {
            font-family: 'Noto Sans Arabic', sans-serif;
        }
        
        /* Gaya untuk Halaman Utama (Menu) */
        @keyframes jiggle {
            0%, 100% { transform: rotate(-1deg); }
            50% { transform: rotate(1deg); }
        }
        .menu-box {
            aspect-ratio: 1/1;
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1), inset 0 -5px 10px rgba(0,0,0,0.15);
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 4px solid white;
            cursor: pointer;
        }
        .menu-box:hover {
            transform: translateY(-10px) scale(1.05);
            animation: jiggle 0.3s infinite;
        }

        /* Gaya untuk Permainan Roda Putar */
        .wheel-container {
            position: relative;
            width: 250px;
            height: 250px;
            border-radius: 50%;
            cursor: grab;
        }
        .wheel-container:active {
            cursor: grabbing;
        }
        .wheel-letter-box {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 50px;
            height: 50px;
            margin-top: -25px;
            margin-left: -25px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        /* Penunjuk di sebelah KANAN roda (untuk roda kiri) */
        .wheel-pointer {
            position: absolute;
            top: 50%;
            right: -15px;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-top: 15px solid transparent;
            border-bottom: 15px solid transparent;
            border-left: 25px solid #ef4444; /* Panah menunjuk ke kiri */
            z-index: 10;
        }
        /* Penunjuk di sebelah KIRI roda (untuk roda kanan) */
        .wheel-pointer-left {
            position: absolute;
            top: 50%;
            left: -15px; /* Diposisikan di kiri */
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-top: 15px solid transparent;
            border-bottom: 15px solid transparent;
            border-right: 25px solid #ef4444; /* Panah menunjuk ke kanan */
            z-index: 10;
        }

        .vowel-card-selected {
            outline: 4px solid #f9a8d4; /* Warna highlight yang berbeda */
            transform: scale(1.15); /* Sedikit lebih besar */
        }
    </style>
</head>
<body class="bg-gradient-to-br from-amber-100 via-rose-100 to-sky-100 min-h-screen flex flex-col items-center justify-center p-4">

    <!-- HALAMAN UTAMA (MENU) -->
    <div id="home-page" class="hidden w-full max-w-4xl flex-col items-center">
        <div class="text-center mb-8">
            <h1 class="text-5xl md:text-7xl font-bold bg-gradient-to-r from-red-500 via-yellow-400 to-blue-500 text-transparent bg-clip-text drop-shadow-lg">Game Sang Juara</h1>
            <p class="text-slate-600 text-lg md:text-xl mt-2">Pilih permainan yang kamu suka!</p>
        </div>

        <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 w-full p-4">
            <!-- Menu Belajar -->
            <button id="menu-learn" class="menu-box bg-gradient-to-br from-blue-400 to-cyan-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" viewBox="0 0 20 20" fill="currentColor"><path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.042 1.9l-2.122 1.06a1 1 0 000 1.84l7 3a1 1 0 00.788 0l7-3a1 1 0 000-1.84l-2.122-1.06a.999.999 0 01-.042-1.9l2.122-1.06a1 1 0 000-1.84l-7-3zM12 10.36l-2 1-2-1V8.36l2-1 2 1v2z"/></svg>
                <span class="text-xl font-semibold">Belajar Huruf</span>
            </button>
            <!-- Menu Hijaiyah -->
            <button id="menu-hijaiyah" class="menu-box bg-gradient-to-br from-teal-400 to-green-400">
                <span class="text-5xl font-hijaiyah">ุง</span>
                <span class="text-xl font-semibold">Hijaiyah</span>
            </button>
            <!-- Menu Susun Kata -->
            <button id="menu-game" class="menu-box bg-gradient-to-br from-pink-400 to-rose-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" /></svg>
                <span class="text-xl font-semibold">Susun Kata</span>
            </button>
            <!-- Menu Main Angka -->
            <button id="menu-number-game" class="menu-box bg-gradient-to-br from-purple-400 to-indigo-400">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>
                <span class="text-xl font-semibold">Main Angka</span>
            </button>
        </div>
        
        <!-- Tombol Donasi (Baru) -->
        <a id="donation-button" href="https://sahabat-digital.myr.id/galang-dana/v2/pengembangan-aplikasi-islami" target="_blank" class="mt-8 px-6 py-3 bg-white/90 text-slate-700 font-bold rounded-full shadow-lg hover:bg-white hover:scale-105 transition-all duration-300 transform flex items-center gap-2">
            <i class="fa-solid fa-heart text-red-500"></i>
            <span>Dukung Kami</span>
        </a>
    </div>

    <!-- KONTEN UNTUK HALAMAN LAIN (disembunyikan) -->
    <div id="learn-page" class="hidden w-full max-w-4xl flex-col items-center"></div>
    <div id="hijaiyah-page" class="hidden w-full max-w-4xl flex-col items-center"></div>
    <div id="game-page" class="hidden w-full max-w-4xl flex-col items-center"></div>
    <div id="number-game-page" class="hidden w-full max-w-4xl flex-col items-center"></div>


    <script>
        // --- Inisialisasi Umum ---
        const successSound = new Tone.PolySynth(Tone.Synth, { envelope: { attack: 0.01, decay: 0.1, sustain: 0.2, release: 0.2 } }).toDestination();
        const errorSound = new Tone.NoiseSynth({ noise: { type: 'brown' }, envelope: { attack: 0.005, decay: 0.1, sustain: 0 } }).toDestination();
        
        // --- EFEK SUARA MENU (DIPERBAIKI) ---
        const menuHoverSound = new Tone.PolySynth(Tone.MembraneSynth, {
            pitchDecay: 0.01,
            octaves: 6,
            oscillator: { type: "sine" },
            envelope: { attack: 0.001, decay: 0.15, sustain: 0.01, release: 0.01 }
        }).toDestination();
        menuHoverSound.volume.value = -20; // Membuat suara lebih lembut

        const menuClickSound = new Tone.PolySynth(Tone.Synth, {
            oscillator: { type: 'triangle' },
            envelope: { attack: 0.01, decay: 0.2, sustain: 0.1, release: 0.1 }
        }).toDestination();
        
        const colors = ['bg-red-400', 'bg-orange-400', 'bg-amber-400', 'bg-yellow-400', 'bg-lime-400', 'bg-green-400', 'bg-emerald-400', 'bg-teal-400', 'bg-cyan-400', 'bg-sky-400', 'bg-blue-400', 'bg-indigo-400', 'bg-violet-400', 'bg-purple-400', 'bg-fuchsia-400', 'bg-pink-400', 'bg-rose-400'];

        function speak(text, lang = 'id-ID', rate = 0.9) {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = lang;
            utterance.rate = rate;
            window.speechSynthesis.speak(utterance);
        }

        // --- Navigasi Halaman ---
        const pages = {
            home: document.getElementById('home-page'),
            learn: document.getElementById('learn-page'),
            hijaiyah: document.getElementById('hijaiyah-page'),
            game: document.getElementById('game-page'),
            numberGame: document.getElementById('number-game-page')
        };
        const menuButtons = {
            learn: document.getElementById('menu-learn'),
            hijaiyah: document.getElementById('menu-hijaiyah'),
            game: document.getElementById('menu-game'),
            numberGame: document.getElementById('menu-number-game')
        };

        function switchPage(activePage) {
            Object.keys(pages).forEach(key => {
                const isHidden = key !== activePage;
                pages[key].classList.toggle('hidden', isHidden);
                pages[key].classList.toggle('flex', !isHidden);
            });
            // Inisialisasi konten halaman saat dibuka
            if (activePage === 'learn') initLearnPage();
            if (activePage === 'hijaiyah') initHijaiyahPage();
            if (activePage === 'game') initGame();
            if (activePage === 'numberGame') initNumberGame();
        }

        // --- MENAMBAHKAN EFEK SUARA KE TOMBOL MENU ---
        Object.keys(menuButtons).forEach(key => {
            const button = menuButtons[key];
            // Efek suara saat kursor diarahkan (hover)
            button.addEventListener('mouseenter', () => {
                menuHoverSound.triggerAttackRelease('C5', '32n');
            });
            // Efek suara saat tombol diklik
            button.addEventListener('click', () => {
                menuClickSound.triggerAttackRelease('E4', '16n');
                switchPage(key);
            });
        });
        
        // --- Tombol Kembali Universal ---
        function createBackButton() {
            const button = document.createElement('button');
            button.className = 'absolute top-4 left-4 px-4 py-2 bg-white/80 text-slate-700 font-bold rounded-full shadow-md hover:bg-white hover:scale-105 transition-all duration-200 z-20';
            button.innerHTML = '&larr; Kembali';
            button.addEventListener('click', () => {
                menuClickSound.triggerAttackRelease('C4', '16n'); // Suara klik saat kembali
                switchPage('home');
            });
            return button;
        }

        // --- Fungsi Universal untuk Membuat Kartu Belajar ---
        function createLearnGrid(container, items, itemClass = '', lang = 'id-ID', nameMap = null) {
            container.innerHTML = '';
            let activeCard = null;

            items.forEach((item, index) => {
                const card = document.createElement('div');
                const color = colors[index % colors.length];
                card.className = `${color} text-white text-5xl md:text-6xl font-bold flex items-center justify-center aspect-square rounded-2xl shadow-lg cursor-pointer transition-transform transform hover:scale-110 ${itemClass}`;
                card.textContent = item;
                const handleInteraction = () => {
                    if (activeCard) activeCard.classList.remove('ring-4', 'ring-yellow-300', 'scale-110');
                    card.classList.add('ring-4', 'ring-yellow-300', 'scale-110');
                    activeCard = card;
                    const textToSpeak = nameMap ? nameMap[item] : item;
                    speak(textToSpeak, lang);
                };
                card.addEventListener('mousedown', handleInteraction);
                card.addEventListener('touchstart', e => { e.preventDefault(); handleInteraction(); });
                container.appendChild(card);
            });
        }

        // --- Logika Halaman Belajar (Latin & Angka) ---
        function initLearnPage() {
            pages.learn.innerHTML = `
                <p class="text-slate-500 text-lg md:text-xl mt-16 text-center mb-6">Sentuh kartu untuk mendengar suaranya</p>
                <div class="flex space-x-4 mb-8 justify-center">
                    <button id="show-letters" class="px-6 py-3 bg-blue-500 text-white font-bold rounded-full shadow-lg transform hover:scale-105 transition-transform duration-300 focus:outline-none">Huruf (A-Z)</button>
                    <button id="show-numbers" class="px-6 py-3 bg-pink-500 text-white font-bold rounded-full shadow-lg transform hover:scale-105 transition-transform duration-300 focus:outline-none">Angka (1-10)</button>
                </div>
                <div id="content-grid-learn" class="grid grid-cols-4 sm:grid-cols-5 md:grid-cols-7 lg:grid-cols-9 gap-4 w-full max-w-4xl"></div>`;
            pages.learn.prepend(createBackButton());
            
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
            const numbers = '1 2 3 4 5 6 7 8 9 10'.split(' ');
            const grid = document.getElementById('content-grid-learn');
            
            document.getElementById('show-letters').addEventListener('click', () => createLearnGrid(grid, letters));
            document.getElementById('show-numbers').addEventListener('click', () => createLearnGrid(grid, numbers));
            createLearnGrid(grid, letters);
        }

        // --- Logika Halaman Belajar (Hijaiyah) ---
        function initHijaiyahPage() {
            pages.hijaiyah.innerHTML = `
                <p class="text-slate-500 text-lg md:text-xl mt-16 text-center mb-6">Sentuh kartu untuk mendengar suaranya</p>
                <div id="content-grid-hijaiyah" class="grid grid-cols-4 sm:grid-cols-5 md:grid-cols-7 lg:grid-cols-8 gap-4 w-full max-w-4xl"></div>`;
            pages.hijaiyah.prepend(createBackButton());
            
            const hijaiyahLetters = ['ุง', 'ุจ', 'ุช', 'ุซ', 'ุฌ', 'ุญ', 'ุฎ', 'ุฏ', 'ุฐ', 'ุฑ', 'ุฒ', 'ุณ', 'ุด', 'ุต', 'ุถ', 'ุท', 'ุธ', 'ุน', 'ุบ', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู', 'ู'];
            const hijaiyahNames = {
                'ุง': 'Alif', 'ุจ': 'Ba', 'ุช': 'Ta', 'ุซ': 'Tsa', 'ุฌ': 'Jim', 'ุญ': 'Ha', 'ุฎ': 'Kho', 
                'ุฏ': 'Dal', 'ุฐ': 'Dzal', 'ุฑ': 'Ro', 'ุฒ': 'Zay', 'ุณ': 'Sin', 'ุด': 'Syin', 'ุต': 'Shod', 
                'ุถ': 'Dhod', 'ุท': 'Tho', 'ุธ': 'Zho', 'ุน': 'Ain', 'ุบ': 'Ghoin', 'ู': 'Fa', 'ู': 'Qof', 
                'ู': 'Kaf', 'ู': 'Lam', 'ู': 'Mim', 'ู': 'Nun', 'ู': 'Ha', 'ู': 'Waw', 'ู': 'Ya'
            };
            const grid = document.getElementById('content-grid-hijaiyah');
            grid.style.direction = 'rtl';
            createLearnGrid(grid, hijaiyahLetters, 'font-hijaiyah', 'id-ID', hijaiyahNames);
        }
        
        // --- Fungsi Universal untuk Membuat Roda ---
        function createWheel(container, items, radius, pointerAngle, onEndDrag) {
            container.innerHTML = '';
            const segmentAngle = 360 / items.length;
            
            items.forEach((item, index) => {
                const box = document.createElement('div');
                const angleDeg = segmentAngle * index;
                const angleRad = angleDeg * (Math.PI / 180);
                const color = colors[index % colors.length];
                
                box.className = `wheel-letter-box ${color}`;
                
                const x = radius * Math.cos(angleRad);
                const y = radius * Math.sin(angleRad);
                box.style.transform = `translate(${x}px, ${y}px) rotate(${-angleDeg}deg)`;
                
                const span = document.createElement('span');
                span.textContent = item;
                span.style.transform = `rotate(${angleDeg}deg)`;
                box.textContent = '';
                box.appendChild(span);
                container.appendChild(box);
            });

            let isDragging = false, startAngle = 0, currentRotation = 0;
            
            const getAngle = (e) => {
                const rect = container.getBoundingClientRect();
                const cx = rect.left + rect.width / 2;
                const cy = rect.top + rect.height / 2;
                const clientX = e.clientX || e.touches[0].clientX;
                const clientY = e.clientY || e.touches[0].clientY;
                return Math.atan2(clientY - cy, clientX - cx) * (180 / Math.PI);
            };

            const startDrag = (e) => { e.preventDefault(); isDragging = true; startAngle = getAngle(e) - currentRotation; container.style.transition = 'none'; };
            const drag = (e) => { if (!isDragging) return; e.preventDefault(); currentRotation = getAngle(e) - startAngle; container.style.transform = `rotate(${currentRotation}deg)`; };
            const endDrag = (e) => {
                if (!isDragging) return;
                isDragging = false;
                
                const effectiveRotation = currentRotation - pointerAngle;
                let winningIndex = Math.round(-effectiveRotation / segmentAngle);
                winningIndex = (winningIndex % items.length + items.length) % items.length;
                
                const snapRotation = pointerAngle - (winningIndex * segmentAngle);

                container.style.transition = 'transform 0.4s cubic-bezier(0.25, 1, 0.5, 1)';
                container.style.transform = `rotate(${snapRotation}deg)`;
                currentRotation = snapRotation;
                onEndDrag(items[winningIndex]);
            };

            container.addEventListener('mousedown', startDrag);
            container.addEventListener('touchstart', startDrag);
            window.addEventListener('mousemove', drag);
            window.addEventListener('touchmove', drag);
            window.addEventListener('mouseup', endDrag);
            window.addEventListener('touchend', endDrag);
        }

        // --- Logika Permainan Susun Kata ---
        function initGame() {
            pages.game.innerHTML = `
                <p class="text-slate-500 text-lg md:text-xl mt-16 text-center mb-6">Geser roda, pilih huruf vokal, dan buat kata!</p>
                <div class="flex flex-col md:flex-row items-center justify-around w-full gap-8">
                    <div class="relative w-[250px] h-[250px] flex items-center justify-center">
                        <div id="wheel-word" class="wheel-container"></div>
                        <div class="wheel-pointer"></div>
                        <div class="absolute w-24 h-24 bg-white/80 rounded-full shadow-inner border-4 border-slate-200 flex items-center justify-center text-slate-500 text-center text-sm p-2">Geser Roda</div>
                    </div>
                    <div class="flex flex-col items-center gap-6">
                        <div id="result-display-word" class="text-5xl md:text-7xl font-bold text-slate-700 bg-white/50 rounded-2xl p-6 h-28 flex items-center justify-center shadow-inner min-w-[250px]">...</div>
                        <div class="text-center">
                            <p class="text-slate-600 font-semibold mb-2">Pilih Huruf Vokal:</p>
                            <div id="vowel-cards" class="flex space-x-3"></div>
                        </div>
                    </div>
                </div>`;
            pages.game.prepend(createBackButton());

            const consonants = ['B', 'C', 'D', 'F', 'G', 'H', 'J', 'K', 'L', 'M', 'N', 'P', 'R', 'S', 'T', 'W', 'Y', 'Z'];
            const vowels = ['A', 'I', 'U', 'E', 'O'];
            let selectedConsonant = null;
            let selectedVowel = null;
            createWheel(document.getElementById('wheel-word'), consonants, 100, 0, (item) => {
                selectedConsonant = item;
                updateResult();
            });
            const vowelContainer = document.getElementById('vowel-cards');
            vowels.forEach(vowel => {
                const card = document.createElement('button');
                card.className = "w-14 h-14 bg-pink-400 text-white text-3xl font-bold rounded-xl shadow-md transition-all duration-200 transform hover:scale-110";
                card.textContent = vowel;
                card.addEventListener('click', () => {
                    selectedVowel = vowel;
                    document.querySelectorAll('#vowel-cards button').forEach(c => c.classList.remove('vowel-card-selected'));
                    card.classList.add('vowel-card-selected');
                    speak(vowel);
                    updateResult();
                });
                vowelContainer.appendChild(card);
            });
            function updateResult() {
                const resultDisplay = document.getElementById('result-display-word');
                if (selectedConsonant && selectedVowel) {
                    const syllable = selectedConsonant + selectedVowel;
                    resultDisplay.textContent = `${selectedConsonant} + ${selectedVowel} = ${syllable}`;
                    speak(syllable, 'id-ID', 0.8);
                    successSound.triggerAttackRelease(["C4", "E4", "G4"], "8n");
                } else if (selectedConsonant) {
                    resultDisplay.textContent = `${selectedConsonant} + ?`;
                    speak(selectedConsonant);
                }
            }
        }

        // --- Logika Permainan Angka ---
        function initNumberGame() {
            pages.numberGame.innerHTML = `
                <p class="text-slate-500 text-lg md:text-xl mt-16 text-center mb-6">Geser roda, lalu hitung jumlahnya!</p>
                <div class="flex flex-col items-center gap-6">
                    <div class="flex flex-col sm:flex-row items-center justify-center gap-4 md:gap-8">
                        <div class="relative w-[250px] h-[250px] flex items-center justify-center">
                            <div id="wheel-number1" class="wheel-container"></div>
                            <div class="wheel-pointer"></div>
                        </div>
                        <div class="text-6xl font-bold text-slate-600 my-4 sm:my-0">+</div>
                        <div class="relative w-[250px] h-[250px] flex items-center justify-center">
                            <div id="wheel-number2" class="wheel-container"></div>
                            <div class="wheel-pointer-left"></div>
                        </div>
                    </div>
                    <div class="flex items-center gap-4 mt-6 p-4 bg-white/50 rounded-2xl shadow-inner">
                        <div id="number-equation" class="text-4xl font-bold text-slate-700">? + ? =</div>
                        <input type="number" id="answer-input" class="w-28 h-16 text-4xl text-center font-bold rounded-xl border-4 border-slate-300 focus:border-purple-500 focus:outline-none">
                        <button id="check-answer-btn" class="w-28 h-16 bg-purple-500 text-white text-2xl font-bold rounded-xl shadow-lg transform hover:scale-105 transition-transform">Periksa</button>
                    </div>
                    <div id="feedback-message" class="text-2xl font-bold h-8 mt-2"></div>
                </div>`;
            pages.numberGame.prepend(createBackButton());

            const numbersForGame = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
            let selectedNumber1 = null;
            let selectedNumber2 = null;

            createWheel(document.getElementById('wheel-number1'), numbersForGame, 100, 0, (num) => {
                selectedNumber1 = num;
                speak(num);
                updateNumberEquation();
            });
            createWheel(document.getElementById('wheel-number2'), numbersForGame, 100, 180, (num) => {
                selectedNumber2 = num;
                speak(num);
                updateNumberEquation();
            });
            
            function resetNumberGame() {
                selectedNumber1 = null;
                selectedNumber2 = null;
                document.getElementById('answer-input').value = '';
                document.getElementById('feedback-message').textContent = '';
                updateNumberEquation();
            }
            
            function updateNumberEquation() {
                const num1Text = selectedNumber1 !== null ? selectedNumber1 : '?';
                const num2Text = selectedNumber2 !== null ? selectedNumber2 : '?';
                document.getElementById('number-equation').textContent = `${num1Text} + ${num2Text} =`;
            }
        
            function checkAnswer() {
                if (selectedNumber1 === null || selectedNumber2 === null) {
                    document.getElementById('feedback-message').textContent = "Putar rodanya dulu!";
                    document.getElementById('feedback-message').style.color = '#dc2626';
                    errorSound.triggerAttackRelease("4n");
                    return;
                }
                const correctAnswer = selectedNumber1 + selectedNumber2;
                const userAnswer = parseInt(document.getElementById('answer-input').value);

                if (userAnswer === correctAnswer) {
                    document.getElementById('feedback-message').textContent = "Benar! Hebat!";
                    document.getElementById('feedback-message').style.color = '#16a34a';
                    successSound.triggerAttackRelease(["C4", "E4", "G4"], "8n");
                    speak("Benar");
                } else {
                    document.getElementById('feedback-message').textContent = "Coba lagi ya!";
                    document.getElementById('feedback-message').style.color = '#dc2626';
                    errorSound.triggerAttackRelease("4n");
                    speak("Salah");
                }
            }
            
            document.getElementById('check-answer-btn').addEventListener('click', checkAnswer);
            document.getElementById('answer-input').addEventListener('keydown', (e) => {
                if (e.key === 'Enter') checkAnswer();
            });

            resetNumberGame();
        }

        // --- Inisialisasi Aplikasi ---
        window.onload = () => {
            Tone.start();
            switchPage('home'); // Mulai dari halaman utama
        };
    </script>
</body>
</html>
